<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Liste des commandes – Sh'Artlock Holmes</title>

    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
        }
        header img {
            width: 140px;
            position: absolute;
            top: 10px;
            right: 10px;
        }
        h1 {
            margin-top: 80px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 25px;
        }
        th, td {
            border: 1px solid black;
            padding: 10px;
            text-align: center;
        }
        .totaux {
            margin-top: 30px;
        }
    </style>
</head>
<body>

<header>
    <img src="logo.png" alt="Logo Sh'Artlock Holmes">
</header>

<h1>Liste des commandes</h1>

<table>
    <thead>
        <tr>
            <th>Heure</th>
            <th>Viennoiserie</th>
            <th>Céréale</th>
            <th>Boisson</th>
        </tr>
    </thead>
    <tbody id="listeCommandes"></tbody>
</table>

<div class="totaux">
    <h2>Totaux</h2>
    <ul id="totauxListe"></ul>
</div>

<script>
let commandes = JSON.parse(localStorage.getItem("commandes")) || [];

// tri croissant par heure
commandes.sort((a, b) => a.heure - b.heure);

let tbody = document.getElementById("listeCommandes");

let totaux = {
    "Croissant": 0,
    "Pain au chocolat": 0,
    "Muesli": 0,
    "Trésor": 0,
    "Lait": 0,
    "Jus d'orange": 0,
    "Jus de pomme": 0
};

commandes.forEach(cmd => {
    if (cmd.viennoiserie) totaux[cmd.viennoiserie]++;
    if (cmd.cereale) totaux[cmd.cereale]++;
    if (cmd.boisson) totaux[cmd.boisson]++;

    let tr = document.createElement("tr");
    tr.innerHTML = `
        <td>${new Date(cmd.heure).toLocaleTimeString()}</td>
        <td>${cmd.viennoiserie || "-"}</td>
        <td>${cmd.cereale || "-"}</td>
        <td>${cmd.boisson || "-"}</td>
    `;
    tbody.appendChild(tr);
});

// affichage totaux
let ul = document.getElementById("totauxListe");
Object.keys(totaux).forEach(item => {
    let li = document.createElement("li");
    li.textContent = `${item} : ${totaux[item]}`;
    ul.appendChild(li);
});
</script>

</body>
</html>
