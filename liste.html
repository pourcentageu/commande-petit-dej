<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Liste des commandes – Sh'Artlock Holmes</title>

<style>
    body {
        font-family: Arial, sans-serif;
        margin: 20px;
    }

    header img {
        width: 180px;
        position: absolute;
        top: 10px;
        right: 10px;
    }

    table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 40px;
    }

    th, td {
        border: 1px solid #555;
        padding: 10px;
        text-align: center;
    }

    th {
        background: #ddd;
    }

    h1 {
        margin-bottom: 40px;
    }

    .totaux {
        margin-top: 30px;
        padding: 15px;
        background: #eee;
        border-radius: 8px;
        width: fit-content;
    }
</style>
</head>

<body>

<header>
    <img src="logo.png" alt="logo">
</header>

<h1>Liste des commandes</h1>

<table id="table">
    <tr>
        <th>Prénom</th>
        <th>Nom</th>
        <th>Adresse</th>
        <th>Heure</th>
        <th>Viennoiserie</th>
        <th>Céréales</th>
        <th>Boisson</th>
    </tr>
</table>

<div class="totaux" id="totaux"></div>

<script>
function afficherListe() {
    let commandes = JSON.parse(localStorage.getItem("commandes") || "[]");

    commandes.sort((a, b) => a.heure.localeCompare(b.heure));

    const table = document.getElementById("table");

    let total = {
        croissant: 0,
        painchoco: 0,
        muesli: 0,
        tresor: 0,
        lait: 0,
        orange: 0,
        pomme: 0
    };

    commandes.forEach(cmd => {
        let tr = document.createElement("tr");

        tr.innerHTML = `
            <td>${cmd.prenom}</td>
            <td>${cmd.nom}</td>
            <td>${cmd.adresse}</td>
            <td>${cmd.heure}</td>
            <td>${cmd.viennoiserie || "–"}</td>
            <td>${cmd.cereales || "–"}</td>
            <td>${cmd.boisson || "–"}</td>
        `;
        table.appendChild(tr);

        // Totaux
        if (cmd.viennoiserie === "Croissant") total.croissant++;
        if (cmd.viennoiserie === "Pain au chocolat") total.painchoco++;
        if (cmd.cereales === "Muesli") total.muesli++;
        if (cmd.cereales === "Tresor") total.tresor++;
        if (cmd.boisson === "Lait") total.lait++;
        if (cmd.boisson === "Jus d'orange") total.orange++;
        if (cmd.boisson === "Jus de pomme") total.pomme++;
    });

    document.getElementById("totaux").innerHTML = `
        <b>Totaux :</b><br>
        Croissants : ${total.croissant}<br>
        Pains au chocolat : ${total.painchoco}<br>
        Muesli : ${total.muesli}<br>
        Trésor : ${total.tresor}<br>
        Lait : ${total.lait}<br>
        Jus d'orange : ${total.orange}<br>
        Jus de pomme : ${total.pomme}
    `;
}

afficherListe();
</script>

</body>
</html>
